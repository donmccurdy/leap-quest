window.Quest={},Quest.View=function(t,e){e=e||{},this.element=t,this.width=e.width||640,this.height=e.height||400,this.init()},Quest.View.prototype.init=function(){this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(3358535,1),this.element.appendChild(this.renderer.domElement),this.initCamera(),this.initLighting(),this.initControls(),this.stats=new Stats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},Quest.View.prototype.initCamera=function(){this.camera=new THREE.PerspectiveCamera(45,this.width/this.height,.1,2e4),this.camera.position.set(-8,8,20),this.scene.add(this.camera)},Quest.View.prototype.initLighting=function(){var t=new THREE.PointLight(8947848),e=new THREE.PointLight(8947848);t.position.set(-100,200,100),e.position.set(50,200,-100),this.scene.add(t),this.scene.add(e)},Quest.View.prototype.initControls=function(){this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement)},Quest.View.prototype.loadMap=function(t){this.map=t;var e=t.getMesh();e.position.set(0,0,0),this.scene.add(e)},Quest.View.prototype.loadCharacter=function(t){this.character=t,t.bindEvents(window);var e=t.getMesh();this.scene.add(e),e.position.set(0,1,0)},Quest.View.prototype.animate=function(){var t=_.now(),e=t-this._last_animate;this._last_animate=t,this.renderer.render(this.scene,this.camera),this.controls.update(),this.stats.update(),e&&this.character.update(e),requestAnimationFrame(_.bind(this.animate,this))};